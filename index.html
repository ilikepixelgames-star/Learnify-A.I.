<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Learnify AI Quiz Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body { font-family: Arial; background-color: #0d0d0d; color: #00fff7; text-align: center; padding: 20px; }
h1 { text-shadow: 0 0 10px #00fff7, 0 0 20px #00fff7; }
textarea { width: 80%; height: 150px; padding: 10px; font-size: 16px; border: 2px solid #00fff7; background-color: #111; color: #00fff7; margin-bottom: 10px; border-radius: 8px; }
button { background: #00fff7; border: none; padding: 12px 20px; font-size: 16px; margin: 5px; cursor: pointer; color: #0d0d0d; font-weight: bold; border-radius: 8px; transition: 0.2s; }
button:hover { box-shadow: 0 0 20px #00fff7; }
#quiz-container { margin-top: 20px; text-align: left; max-width: 800px; margin-left: auto; margin-right: auto; }
.question { background-color: #111; border: 1px solid #00fff7; padding: 15px; margin-bottom: 10px; border-radius: 8px; box-shadow: 0 0 5px #00fff7; }
.answers button { display: block; width: 100%; margin-top: 5px; background: #00fff7; color: #0d0d0d; border-radius: 5px; }
.answers button:hover { box-shadow: 0 0 15px #00fff7; }
</style>
</head>
<body>

<h1>Learnify AI Quiz Generator</h1>
<textarea id="text-input" placeholder="Paste your text here..."></textarea>
<br>
<button onclick="generateQuiz()">Generate Quiz</button>
<div id="quiz-container"></div>

<script>
async function generateQuiz() {
  const text = document.getElementById("text-input").value.trim();
  if (!text) return alert("Please paste some text!");

  const quizContainer = document.getElementById("quiz-container");
  quizContainer.innerHTML = "Loading...";

  try {
    const res = await fetch("http://localhost:3000/generate-quiz", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ text })
    });

    const data = await res.json();
    let questions;

    try {
      questions = JSON.parse(data.quiz);
    } catch(e) {
      alert("Error parsing AI output. Check console.");
      console.log(data.quiz);
      return;
    }

    quizContainer.innerHTML = "";

    questions.forEach((q, i) => {
      const qDiv = document.createElement("div");
      qDiv.className = "question";
      qDiv.innerHTML = `<strong>Q${i+1}: ${q.question}</strong><div class="answers"></div>`;
      const answersDiv = qDiv.querySelector(".answers");

      q.choices.forEach(a => {
        const btn = document.createElement("button");
        btn.textContent = a;
        btn.onclick = () => alert(a === q.answer ? "✅ Correct!" : `❌ Wrong! Correct: ${q.answer}`);
        answersDiv.appendChild(btn);
      });

      quizContainer.appendChild(qDiv);
    });

  } catch(err) {
    console.error(err);
    alert("Failed to generate quiz. Make sure the server is running.");
    quizContainer.innerHTML = "";
  }
}
</script>

</body>
</html>
