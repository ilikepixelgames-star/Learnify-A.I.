class QuizGenerator {

  static generate(topic, amount = 5) {
    const quiz = [];

    for (let i = 0; i < amount; i++) {
      quiz.push(this.createQuestion(topic));
    }

    return quiz;
  }

  static createQuestion(topic) {

    const questionTypes = [
      "definition",
      "fact",
      "comparison",
      "application",
      "truefalse"
    ];

    const type = questionTypes[Math.floor(Math.random() * questionTypes.length)];

    switch (type) {

      case "definition":
        return this.definitionQuestion(topic);

      case "fact":
        return this.factQuestion(topic);

      case "comparison":
        return this.comparisonQuestion(topic);

      case "application":
        return this.applicationQuestion(topic);

      case "truefalse":
        return this.trueFalseQuestion(topic);

      default:
        return this.factQuestion(topic);
    }
  }

  static shuffleAnswers(answers, correctIndex) {
    const correctValue = answers[correctIndex];

    answers = answers.sort(() => Math.random() - 0.5);

    return {
      answers: answers,
      correct: answers.indexOf(correctValue)
    };
  }

  static definitionQuestion(topic) {
    const question = `What best describes ${topic}?`;

    const answers = [
      `A concept related to ${topic}`,
      `A random unrelated idea`,
      `An animal species`,
      `A type of vehicle`
    ];

    const shuffled = this.shuffleAnswers(answers, 0);

    return {
      question,
      answers: shuffled.answers,
      correct: shuffled.correct
    };
  }

  static factQuestion(topic) {
    const question = `Which statement is most likely true about ${topic}?`;

    const answers = [
      `${topic} is studied in education`,
      `${topic} is made of chocolate`,
      `${topic} lives underwater`,
      `${topic} only exists at night`
    ];

    const shuffled = this.shuffleAnswers(answers, 0);

    return {
      question,
      answers: shuffled.answers,
      correct: shuffled.correct
    };
  }

  static comparisonQuestion(topic) {
    const question = `How does ${topic} compare to unrelated objects?`;

    const answers = [
      `${topic} has distinct characteristics`,
      `${topic} is identical to a spoon`,
      `${topic} is a planet`,
      `${topic} is fictional`
    ];

    const shuffled = this.shuffleAnswers(answers, 0);

    return {
      question,
      answers: shuffled.answers,
      correct: shuffled.correct
    };
  }

  static applicationQuestion(topic) {
    const question = `Why is ${topic} useful in real life?`;

    const answers = [
      `${topic} helps people learn and understand`,
      `${topic} explodes when touched`,
      `${topic} turns into dust instantly`,
      `${topic} disappears randomly`
    ];

    const shuffled = this.shuffleAnswers(answers, 0);

    return {
      question,
      answers: shuffled.answers,
      correct: shuffled.correct
    };
  }

  static trueFalseQuestion(topic) {

    const isTrue = Math.random() > 0.5;

    const question = `True or False: ${topic} is important in some field.`;

    const answers = ["True", "False"];

    return {
      question,
      answers,
      correct: isTrue ? 0 : 1
    };
  }

}
